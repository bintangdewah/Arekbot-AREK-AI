import React, { useState, useRef, useEffect } from 'react';

export default function ArekbotWebsite() {
  const [showAbout, setShowAbout] = useState(false);
  const [showContact, setShowContact] = useState(false);
  const [showFullChat, setShowFullChat] = useState(false);
  const [showDemoChat, setShowDemoChat] = useState(false);
  const [showMenu, setShowMenu] = useState(false);
  const [showHistory, setShowHistory] = useState(false);
  const [showExitDialog, setShowExitDialog] = useState(false);
  
  const [chatHistory, setChatHistory] = useState([]);
  const [currentChatId, setCurrentChatId] = useState(null);
  
  const [fullChatHistory, setFullChatHistory] = useState([
    { role: 'user', content: 'Halo Arekbot!' },
    { role: 'assistant', content: 'Halo! Saya Arekbot, asisten AI dari Jawa Timur yang siap membantu Anda belajar. Ada yang bisa saya bantu?' }
  ]);
  const [fullMessages, setFullMessages] = useState([
    { sender: 'user', text: 'Halo Arekbot!' },
    { sender: 'bot', text: 'Halo! Saya Arekbot, asisten AI dari Jawa Timur yang siap membantu Anda belajar. Ada yang bisa saya bantu?' }
  ]);
  const [fullInput, setFullInput] = useState('');
  const [fullLoading, setFullLoading] = useState(false);
  
  const [demoMessages, setDemoMessages] = useState([
    { sender: 'user', text: 'Halo Arekbot!' },
    { sender: 'bot', text: 'Halo! Saya Arekbot dalam mode demo. Anda bisa bertanya maksimal 2 pertanyaan.' }
  ]);
  const [demoInput, setDemoInput] = useState('');
  const [demoLoading, setDemoLoading] = useState(false);
  const [demoCount, setDemoCount] = useState(0);

  const fullChatRef = useRef(null);
  const demoChatRef = useRef(null);

  const scrollToBottom = (ref) => {
    if (ref.current) {
      setTimeout(() => {
        ref.current.scrollTop = ref.current.scrollHeight;
      }, 100);
    }
  };

  useEffect(() => {
    scrollToBottom(fullChatRef);
  }, [fullMessages]);

  useEffect(() => {
    scrollToBottom(demoChatRef);
  }, [demoMessages]);

  const sendFullMessage = async () => {
    if (!fullInput.trim() || fullLoading) return;
    
    const userMsg = fullInput.trim();
    const newUserMessage = { sender: 'user', text: userMsg };
    
    setFullMessages(prev => [...prev, newUserMessage]);
    setFullInput('');
    setFullLoading(true);

    const newHistory = [
      ...fullChatHistory,
      { role: 'user', content: userMsg }
    ];

    try {
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          model: 'claude-sonnet-4-20250514',
          max_tokens: 1500,
          system: 'Kamu adalah Arekbot, asisten AI dari Jawa Timur yang membantu pembelajaran. PENTING: Jangan pernah menyebut dirimu sebagai Claude atau Anthropic. Selalu perkenalkan diri sebagai Arekbot. Ingat semua percakapan sebelumnya dengan user, termasuk nama panggilan yang mereka berikan, preferensi mereka, dan konteks pembicaraan sebelumnya. Jawab dengan ramah, informatif, dan personal dalam bahasa Indonesia.',
          messages: newHistory,
          tools: [{ type: 'web_search_20250305', name: 'web_search' }]
        })
      });

      const data = await response.json();
      let botResponse = '';
      
      if (data.content) {
        botResponse = data.content
          .filter(item => item.type === 'text')
          .map(item => item.text)
          .join('\n');
      }

      const assistantResponse = botResponse || 'Maaf, terjadi kesalahan. Silakan coba lagi.';
      
      setFullMessages(prev => [...prev, { 
        sender: 'bot', 
        text: assistantResponse
      }]);

      setFullChatHistory([
        ...newHistory,
        { role: 'assistant', content: assistantResponse }
      ]);

    } catch (error) {
      setFullMessages(prev => [...prev, { 
        sender: 'bot', 
        text: 'Maaf, terjadi kesalahan koneksi. Silakan coba lagi.' 
      }]);
    }

    setFullLoading(false);
  };

  const sendDemoMessage = async () => {
    if (!demoInput.trim() || demoLoading) return;
    
    if (demoCount >= 2) {
      setDemoMessages(prev => [...prev, { 
        sender: 'bot', 
        text: 'âš ï¸ Maaf, demo hanya bisa digunakan maksimal 2 pertanyaan. Silakan gunakan "Mulai Sekarang" untuk chat tanpa batas dengan memori percakapan!' 
      }]);
      return;
    }
    
    const userMsg = demoInput.trim();
    setDemoMessages(prev => [...prev, { sender: 'user', text: userMsg }]);
    setDemoInput('');
    setDemoLoading(true);
    setDemoCount(demoCount + 1);

    try {
      const response = await fetch('https://api.anthropic.com/v1/messages', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          model: 'claude-sonnet-4-20250514',
          max_tokens: 1000,
          system: 'Kamu adalah Arekbot, asisten AI dari Jawa Timur. PENTING: Jangan pernah menyebut dirimu sebagai Claude atau Anthropic. Selalu perkenalkan diri sebagai Arekbot. Jawab dengan singkat, jelas, dan ramah dalam bahasa Indonesia.',
          messages: [{ 
            role: 'user', 
            content: userMsg
          }]
        })
      });

      const data = await response.json();
      let botResponse = '';
      
      if (data.content) {
        botResponse = data.content
          .filter(item => item.type === 'text')
          .map(item => item.text)
          .join('\n');
      }

      setDemoMessages(prev => [...prev, { 
        sender: 'bot', 
        text: botResponse || 'Maaf, terjadi kesalahan. Silakan coba lagi.' 
      }]);

      if (demoCount + 1 >= 2) {
        setTimeout(() => {
          setDemoMessages(prev => [...prev, { 
            sender: 'bot', 
            text: 'âš ï¸ Anda telah mencapai batas 2 pertanyaan demo. Silakan gunakan "Mulai Sekarang" untuk chat tanpa batas dengan memori percakapan!' 
          }]);
        }, 1000);
      }
    } catch (error) {
      setDemoMessages(prev => [...prev, { 
        sender: 'bot', 
        text: 'Maaf, terjadi kesalahan koneksi.' 
      }]);
    }

    setDemoLoading(false);
  };

  const handleKeyPress = (e, type) => {
    if (e.key === 'Enter' && !e.shiftKey) {
      e.preventDefault();
      if (type === 'full') sendFullMessage();
      if (type === 'demo') sendDemoMessage();
    }
  };

  const startFullChat = () => {
    const newChatId = Date.now();
    setCurrentChatId(newChatId);
    setShowFullChat(true);
    setTimeout(() => scrollToBottom(fullChatRef), 300);
  };

  const handleExitChat = () => {
    setShowExitDialog(true);
  };

  const saveToHistory = () => {
    const newHistory = {
      id: currentChatId,
      timestamp: new Date().toLocaleString('id-ID'),
      messages: fullMessages,
      preview: fullMessages.length > 2 ? fullMessages[2].text.substring(0, 50) + '...' : 'Percakapan baru'
    };
    setChatHistory(prev => [newHistory, ...prev]);
    resetChat();
    setShowExitDialog(false);
    setShowFullChat(false);
  };

  const continueChat = () => {
    setShowExitDialog(false);
  };

  const resetChat = () => {
    setFullChatHistory([
      { role: 'user', content: 'Halo Arekbot!' },
      { role: 'assistant', content: 'Halo! Saya Arekbot, asisten AI dari Jawa Timur yang siap membantu Anda belajar. Ada yang bisa saya bantu?' }
    ]);
    setFullMessages([
      { sender: 'user', text: 'Halo Arekbot!' },
      { sender: 'bot', text: 'Halo! Saya Arekbot, asisten AI dari Jawa Timur yang siap membantu Anda belajar. Ada yang bisa saya bantu?' }
    ]);
    setCurrentChatId(null);
  };

  const loadHistoryChat = (historyItem) => {
    setFullMessages(historyItem.messages);
    setFullChatHistory(historyItem.messages.map(msg => ({
      role: msg.sender === 'user' ? 'user' : 'assistant',
      content: msg.text
    })));
    setCurrentChatId(historyItem.id);
    setShowHistory(false);
    setShowFullChat(true);
  };

  const deleteHistory = (id) => {
    setChatHistory(prev => prev.filter(item => item.id !== id));
  };

  if (showFullChat) {
    return (
      <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white flex flex-col">
        <nav className="bg-black/30 backdrop-blur-md border-b border-white/10 px-4 py-4">
          <div className="max-w-7xl mx-auto flex justify-between items-center">
            <div className="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent flex items-center gap-2">
              <span className="text-4xl">ğŸŠ</span> Arekbot Chat
            </div>
            <button onClick={handleExitChat} className="bg-red-500/20 hover:bg-red-500/40 px-6 py-2 rounded-full font-semibold transition border border-red-500/50">
              â† Keluar
            </button>
          </div>
        </nav>

        <div className="flex-1 overflow-hidden flex flex-col max-w-7xl w-full mx-auto px-4 py-6">
          <div ref={fullChatRef} className="flex-1 overflow-y-auto space-y-4 mb-4 pr-2 scroll-smooth">
            {fullMessages.map((msg, idx) => (
              <div key={idx} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'} animate-message`}>
                <div className={`max-w-[80%] p-4 rounded-2xl shadow-lg ${
                  msg.sender === 'user' 
                    ? 'bg-gradient-to-r from-purple-500 to-pink-600 text-white' 
                    : 'bg-white/10 text-white border border-white/20 backdrop-blur-md'
                }`}>
                  <p className="whitespace-pre-wrap leading-relaxed">{msg.text}</p>
                </div>
              </div>
            ))}
            {fullLoading && (
              <div className="flex justify-start animate-message">
                <div className="bg-white/10 text-white border border-white/20 p-4 rounded-2xl backdrop-blur-md">
                  <span className="animate-pulse">Arekbot sedang mengetik...</span>
                </div>
              </div>
            )}
          </div>

          <div className="bg-black/30 backdrop-blur-md rounded-2xl p-4 border border-white/10">
            <div className="flex gap-2">
              <input
                type="text"
                value={fullInput}
                onChange={(e) => setFullInput(e.target.value)}
                onKeyPress={(e) => handleKeyPress(e, 'full')}
                placeholder="Ketik pertanyaan Anda di sini..."
                className="flex-1 bg-white/10 border border-white/20 rounded-full px-6 py-4 text-white placeholder-gray-400 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/50"
                disabled={fullLoading}
              />
              <button
                onClick={sendFullMessage}
                disabled={fullLoading || !fullInput.trim()}
                className="bg-gradient-to-r from-purple-500 to-pink-600 px-8 py-4 rounded-full font-semibold hover:scale-105 transition disabled:opacity-50 disabled:cursor-not-allowed shadow-lg"
              >
                {fullLoading ? 'â³' : 'ğŸ“¤'}
              </button>
            </div>
            <p className="text-xs text-gray-400 mt-2 text-center">ğŸ’¡ Arekbot akan mengingat semua percakapan Anda</p>
          </div>
        </div>

        {showExitDialog && (
          <div className="fixed inset-0 bg-black/80 z-[200] flex items-center justify-center p-4">
            <div className="bg-gradient-to-br from-slate-900 to-purple-900 rounded-3xl p-8 max-w-md w-full border border-purple-500/30 shadow-2xl">
              <h3 className="text-2xl font-bold text-purple-400 mb-4">ğŸ’¬ Simpan Percakapan?</h3>
              <p className="text-white mb-6">Apakah Anda ingin menyimpan percakapan ini ke riwayat atau melanjutkan chat?</p>
              <div className="space-y-3">
                <button onClick={saveToHistory} className="w-full bg-gradient-to-r from-green-500 to-emerald-600 px-6 py-3 rounded-full font-semibold hover:scale-105 transition shadow-lg">
                  ğŸ’¾ Simpan ke Riwayat & Keluar
                </button>
                <button onClick={continueChat} className="w-full bg-gradient-to-r from-purple-500 to-pink-600 px-6 py-3 rounded-full font-semibold hover:scale-105 transition shadow-lg">
                  â†©ï¸ Lanjutkan Chat
                </button>
                <button onClick={() => { resetChat(); setShowExitDialog(false); setShowFullChat(false); }} className="w-full bg-red-500/20 border-2 border-red-500 px-6 py-3 rounded-full font-semibold hover:bg-red-500/40 transition">
                  ğŸ—‘ï¸ Buang & Keluar
                </button>
              </div>
            </div>
          </div>
        )}
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 text-white scroll-smooth">
      <style>{`
        html {
          scroll-behavior: smooth;
        }
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(10px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        .animate-message {
          animation: fadeIn 0.3s ease-out;
        }
      `}</style>
      <nav className="sticky top-0 z-50 bg-black/30 backdrop-blur-md border-b border-white/10">
        <div className="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
          <div className="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent flex items-center gap-2">
            <span className="text-4xl">ğŸŠ</span> Arekbot
          </div>
          <button onClick={() => setShowMenu(!showMenu)} className="md:hidden text-2xl">â˜°</button>
          <ul className={`md:flex gap-6 ${showMenu ? 'flex' : 'hidden'} flex-col md:flex-row absolute md:relative top-16 md:top-0 left-0 right-0 bg-black/95 md:bg-transparent p-4 md:p-0`}>
            <li><a href="#home" onClick={() => setShowMenu(false)} className="hover:text-purple-400 transition px-4 py-2 rounded-lg hover:bg-white/10 block scroll-smooth">Beranda</a></li>
            <li><a href="#tentang" onClick={() => setShowMenu(false)} className="hover:text-purple-400 transition px-4 py-2 rounded-lg hover:bg-white/10 block scroll-smooth">Tentang</a></li>
            <li><a href="#fitur" onClick={() => setShowMenu(false)} className="hover:text-purple-400 transition px-4 py-2 rounded-lg hover:bg-white/10 block scroll-smooth">Fitur</a></li>
            <li><a href="#demo" onClick={() => setShowMenu(false)} className="hover:text-purple-400 transition px-4 py-2 rounded-lg hover:bg-white/10 block scroll-smooth">Demo</a></li>
          </ul>
        </div>
      </nav>

      <section id="home" className="max-w-7xl mx-auto px-4 py-20 text-center">
        <h1 className="text-5xl md:text-7xl font-bold mb-6 bg-gradient-to-r from-purple-400 via-pink-500 to-purple-600 bg-clip-text text-transparent animate-pulse">
          Selamat Datang di Arekbot
        </h1>
        <p className="text-xl md:text-2xl text-gray-300 mb-10 max-w-3xl mx-auto">
          Platform Chatbot AI Inovatif untuk Edukasi & Pemberdayaan Digital dari Jawa Timur
        </p>
        <div className="flex flex-col items-center gap-4">
          <button onClick={startFullChat} className="bg-gradient-to-r from-purple-500 to-pink-600 px-16 py-6 rounded-full font-bold text-2xl hover:scale-105 transition shadow-2xl hover:shadow-purple-500/50">
            ğŸš€ Mulai Sekarang
          </button>
          <button onClick={() => setShowHistory(true)} className="bg-white/10 border border-white/20 px-10 py-3 rounded-full font-semibold text-lg hover:bg-white/20 transition">
            ğŸ“š Riwayat Percakapan
          </button>
        </div>
      </section>

      <div className="max-w-7xl mx-auto px-4 py-12 space-y-10">
        <section id="tentang" className="bg-white/5 backdrop-blur-md rounded-3xl p-10 border border-white/10 hover:shadow-2xl hover:shadow-purple-500/30 transition scroll-mt-20">
          <h2 className="text-3xl font-bold text-purple-400 mb-6 flex items-center gap-4">
            <span className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-gray-900 font-bold">â„¹ï¸</span>
            Tentang Arekbot
          </h2>
          <div className="text-white space-y-4 leading-relaxed">
            <p><strong className="text-purple-400">AREKBOT</strong> adalah sebuah aplikasi chatbot berbasis kecerdasan buatan (AI) yang dirancang sebagai solusi digital untuk membantu proses pembelajaran para pelajar, khususnya di tingkat SMA. Nama "Arekbot" berasal dari kata "Arek" yang berarti anak atau generasi muda dalam bahasa Jawa Timur, dikombinasikan dengan kata "Bot" yang merujuk pada program yang mampu merespons dan berinteraksi dengan pengguna.</p>
            <p>Aplikasi web ini berfungsi sebagai asisten belajar yang dapat memberikan jawaban cepat, membantu memahami konsep pelajaran, serta memfasilitasi interaksi sederhana antara pengguna dan sistem berbasis teks. Tidak seperti chatbot pada umumnya yang membutuhkan internet untuk mengakses server, Arekbot dirancang untuk dapat berjalan secara lokal (offline) menggunakan model AI ringan.</p>
            <p>Tujuan utama pengembangan Arekbot adalah menyediakan sebuah alat bantu belajar yang praktis, mudah diakses, dan ramah bagi siswa. Dengan menghadirkan teknologi yang sederhana namun fungsional, Arekbot mendorong pelajar agar lebih mandiri dalam mencari informasi dan memahami pelajaran.</p>
            <p className="text-purple-400 font-semibold">Dibuat dengan dedikasi oleh generasi muda Jawa Timur! ğŸš€</p>
          </div>
        </section>

        <section className="bg-white/5 backdrop-blur-md rounded-3xl p-10 border border-white/10 hover:shadow-2xl hover:shadow-purple-500/30 transition scroll-mt-20">
          <h2 className="text-3xl font-bold text-purple-400 mb-6 flex items-center gap-4">
            <span className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-gray-900 font-bold">1</span>
            Identitas Produk
          </h2>
          <p className="text-white text-lg leading-relaxed">
            Arekbot adalah aplikasi web chatbot berbasis kecerdasan buatan yang dapat berjalan sepenuhnya offline di perangkat lokal. Aplikasi ini dibuat oleh siswa sebagai bentuk inovasi digital yang memadukan teknologi modern dengan sentuhan kearifan lokal Jawa Timur.
          </p>
        </section>

        <section className="bg-white/5 backdrop-blur-md rounded-3xl p-10 border border-white/10 hover:shadow-2xl hover:shadow-purple-500/30 transition scroll-mt-20">
          <h2 className="text-3xl font-bold text-purple-400 mb-6 flex items-center gap-4">
            <span className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-gray-900 font-bold">2</span>
            Tujuan Utama
          </h2>
          <div className="space-y-4">
            {['Menyediakan layanan chatbot yang cepat dan dapat diakses tanpa internet.', 'Menjadi alat bantu belajar bagi siswa, guru, atau pengguna umum.', 'Menunjukkan kemampuan generasi muda Jawa Timur dalam mengembangkan solusi digital mandiri.', 'Menghadirkan AI yang hemat biaya, tidak tergantung server berbayar atau cloud.'].map((item, idx) => (
              <div key={idx} className="flex items-start gap-4">
                <span className="w-10 h-10 rounded-full bg-gradient-to-r from-purple-500 to-pink-600 flex items-center justify-center flex-shrink-0">{idx + 1}</span>
                <span className="text-white text-lg leading-relaxed">{item}</span>
              </div>
            ))}
          </div>
        </section>

        <section id="fitur" className="bg-white/5 backdrop-blur-md rounded-3xl p-10 border border-white/10 hover:shadow-2xl hover:shadow-purple-500/30 transition scroll-mt-20">
          <h2 className="text-3xl font-bold text-purple-400 mb-6 flex items-center gap-4">
            <span className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-gray-900 font-bold">3</span>
            Fitur Unggulan
          </h2>
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6 mt-8">
            {[
              { icon: 'âš¡', title: 'Respon Cepat', desc: 'Dapatkan jawaban instan tanpa delay dari server' },
              { icon: 'ğŸ§ ', title: 'Memori Cerdas', desc: 'Mengingat percakapan dan preferensi Anda' },
              { icon: 'ğŸ“š', title: 'Edukatif', desc: 'Dirancang khusus untuk membantu proses pembelajaran' },
              { icon: 'ğŸ’°', title: 'Hemat Biaya', desc: 'Tanpa biaya server atau subscription bulanan' }
            ].map((feature, idx) => (
              <div key={idx} className="bg-white/5 border border-white/10 rounded-2xl p-6 text-center hover:bg-purple-500/10 hover:scale-105 transition cursor-pointer">
                <div className="text-5xl mb-4">{feature.icon}</div>
                <h3 className="text-xl font-semibold text-purple-400 mb-2">{feature.title}</h3>
                <p className="text-gray-300">{feature.desc}</p>
              </div>
            ))}
          </div>
        </section>

        <section id="demo" className="bg-white/5 backdrop-blur-md rounded-3xl p-10 border border-white/10 hover:shadow-2xl hover:shadow-purple-500/30 transition scroll-mt-20">
          <h2 className="text-3xl font-bold text-purple-400 mb-6 flex items-center gap-4">
            <span className="w-10 h-10 rounded-full bg-gradient-to-r from-cyan-400 to-blue-500 flex items-center justify-center text-gray-900 font-bold">4</span>
            Demo Chatbot Interaktif
          </h2>
          <div className="bg-black/30 rounded-2xl p-8">
            <div className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-6 max-w-2xl mx-auto h-64 overflow-y-auto border border-white/10">
              <div className="bg-white/10 text-white p-3 rounded-2xl mb-2 max-w-[80%] border border-white/20">
                <strong>Anda:</strong> Halo Arekbot!
              </div>
              <div className="bg-gradient-to-r from-purple-500 to-pink-600 text-white p-3 rounded-2xl mb-2 max-w-[80%] ml-auto">
                <strong>Arekbot:</strong> Halo! Saya Arekbot, siap membantu Anda. Ada yang bisa saya bantu?
              </div>
            </div>
            <div className="text-center mt-6">
              <button onClick={() => setShowDemoChat(true)} className="bg-gradient-to-r from-green-500 to-emerald-600 px-8 py-3 rounded-full font-semibold hover:scale-105 transition shadow-lg">
                ğŸ® Coba Demo
              </button>
            </div>
          </div>
        </section>

        <section className="bg-white/5 backdrop-blur-md rounded-3xl p-10 border border-white/10 text-center">
          <h2 className="text-3xl font-bold text-purple-400 mb-4">Siap Mencoba Arekbot?</h2>
          <p className="text-gray-300 mb-8">Bergabunglah dengan ribuan pengguna lainnya dan rasakan pengalaman AI yang berbeda</p>
          <button onClick={startFullChat} className="bg-gradient-to-r from-purple-500 to-pink-600 px-10 py-4 rounded-full font-semibold text-lg hover:scale-105 transition shadow-lg mr-4">
            ğŸš€ Mulai Chat
          </button>
          <button onClick={() => setShowContact(true)} className="bg-gradient-to-r from-yellow-500 to-orange-600 px-10 py-4 rounded-full font-semibold text-lg hover:scale-105 transition shadow-lg">
            ğŸ“§ Hubungi Kami
          </button>
        </section>
      </div>

      <footer className="bg-black/50 border-t border-white/10 py-10 mt-20">
        <div className="max-w-7xl mx-auto px-4 text-center">
          <div className="text-2xl font-bold bg-gradient-to-r from-purple-400 to-pink-600 bg-clip-text text-transparent flex items-center justify-center gap-2 mb-4">
            <span className="text-4xl">ğŸŠ</span> Arekbot
          </div>
          <p className="text-gray-400 mb-6">Platform Chatbot AI Inovatif dari Jawa Timur</p>
          <div className="flex gap-4 justify-center mb-6">
            {['ğŸ“˜', 'ğŸ¦', 'ğŸ“·', 'ğŸ’¼'].map((icon, idx) => (
              <a key={idx} href="#" className="w-12 h-12 rounded-full bg-purple-500/20 flex items-center justify-center hover:bg-purple-500/40 transition text-2xl">
                {icon}
              </a>
            ))}
          </div>
          <p className="text-gray-500 text-sm">Â© 2025 Arekbot. Made in Jawa Timur</p>
        </div>
      </footer>

      {showHistory && (
        <div onClick={() => setShowHistory(false)} className="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4">
          <div onClick={(e) => e.stopPropagation()} className="bg-gradient-to-br from-slate-900 to-purple-900 rounded-3xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-purple-500/30 shadow-2xl">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-3xl font-bold text-purple-400">ğŸ“š Riwayat Percakapan</h2>
              <button onClick={() => setShowHistory(false)} className="text-4xl text-purple-400 hover:text-purple-300 transition">&times;</button>
            </div>
            {chatHistory.length === 0 ? (
              <div className="text-center py-12">
                <p className="text-gray-400 text-lg mb-4">Belum ada riwayat percakapan</p>
                <p className="text-gray-500">Mulai chat untuk menyimpan riwayat</p>
              </div>
            ) : (
              <div className="space-y-4">
                {chatHistory.map((item) => (
                  <div key={item.id} className="bg-white/5 border border-white/10 rounded-2xl p-6 hover:bg-white/10 transition">
                    <div className="flex justify-between items-start mb-3">
                      <div className="flex-1">
                        <p className="text-purple-400 font-semibold mb-2">{item.timestamp}</p>
                        <p className="text-white">{item.preview}</p>
                        <p className="text-gray-400 text-sm mt-2">{item.messages.length} pesan</p>
                      </div>
                      <div className="flex gap-2">
                        <button onClick={() => loadHistoryChat(item)} className="bg-purple-500/20 hover:bg-purple-500/40 px-4 py-2 rounded-full text-sm transition">
                          ğŸ“‚ Buka
                        </button>
                        <button onClick={() => deleteHistory(item.id)} className="bg-red-500/20 hover:bg-red-500/40 px-4 py-2 rounded-full text-sm transition">
                          ğŸ—‘ï¸
                        </button>
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            )}
          </div>
        </div>
      )}

      {showContact && (
        <div onClick={() => setShowContact(false)} className="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4">
          <div onClick={(e) => e.stopPropagation()} className="bg-gradient-to-br from-slate-900 to-purple-900 rounded-3xl p-8 max-w-md w-full border border-purple-500/30 shadow-2xl">
            <div className="flex justify-between items-center mb-6">
              <h2 className="text-3xl font-bold text-purple-400">ğŸ“§ Hubungi Kami</h2>
              <button onClick={() => setShowContact(false)} className="text-4xl text-purple-400 hover:text-purple-300 transition">&times;</button>
            </div>
            <div className="space-y-4">
              <div className="bg-white/10 rounded-2xl p-6 border border-white/20 text-center hover:bg-white/15 transition">
                <div className="text-4xl mb-3">ğŸ“±</div>
                <p className="text-white text-lg font-semibold mb-2">0856-4827-7958</p>
                <p className="text-purple-400">(Bintang)</p>
              </div>
              <div className="bg-white/10 rounded-2xl p-6 border border-white/20 text-center hover:bg-white/15 transition">
                <div className="text-4xl mb-3">ğŸ“±</div>
                <p className="text-white text-lg font-semibold mb-2">0812-1922-6698</p>
                <p className="text-purple-400">(Rei)</p>
              </div>
            </div>
          </div>
        </div>
      )}

      {showDemoChat && (
        <div onClick={() => setShowDemoChat(false)} className="fixed inset-0 bg-black/80 z-[100] flex items-center justify-center p-4">
          <div onClick={(e) => e.stopPropagation()} className="bg-gradient-to-br from-slate-900 to-purple-900 rounded-3xl p-6 max-w-4xl w-full h-[80vh] flex flex-col border border-purple-500/30 shadow-2xl">
            <div className="flex justify-between items-center mb-4 pb-4 border-b border-white/10">
              <div>
                <h2 className="text-2xl font-bold text-purple-400">ğŸ® Demo Chat Arekbot</h2>
                <p className="text-sm text-gray-400">Pertanyaan: {demoCount}/2</p>
              </div>
              <button onClick={() => setShowDemoChat(false)} className="text-4xl text-purple-400 hover:text-purple-300 transition">&times;</button>
            </div>
            <div ref={demoChatRef} className="flex-1 overflow-y-auto space-y-4 mb-4 pr-2 scroll-smooth">
              {demoMessages.map((msg, idx) => (
                <div key={idx} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'} animate-message`}>
                  <div className={`max-w-[80%] p-4 rounded-2xl ${msg.sender === 'user' ? 'bg-gradient-to-r from-green-500 to-emerald-600 text-white' : 'bg-white/10 text-white border border-white/20'}`}>
                    <p className="whitespace-pre-wrap">{msg.text}</p>
                  </div>
                </div>
              ))}
              {demoLoading && (
                <div className="flex justify-start animate-message">
                  <div className="bg-white/10 text-white border border-white/20 p-4 rounded-2xl">
                    <span className="animate-pulse">Arekbot sedang mengetik...</span>
                  </div>
                </div>
              )}
            </div>
            <div className="flex gap-2">
              <input type="text" value={demoInput} onChange={(e) => setDemoInput(e.target.value)} onKeyPress={(e) => handleKeyPress(e, 'demo')} placeholder="Ketik pertanyaan Anda..." className="flex-1 bg-white/10 border border-white/20 rounded-full px-6 py-3 text-white placeholder-gray-400 focus:outline-none focus:border-green-500" disabled={demoLoading} />
              <button onClick={sendDemoMessage} disabled={demoLoading || !demoInput.trim()} className="bg-gradient-to-r from-green-500 to-emerald-600 px-8 py-3 rounded-full font-semibold hover:scale-105 transition disabled:opacity-50 disabled:cursor-not-allowed">
                {demoLoading ? 'â³' : 'ğŸ“¤'}
              </button>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}